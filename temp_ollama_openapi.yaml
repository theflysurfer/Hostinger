openapi: 3.0.3
info:
  title: Ollama API
  description: |
    Ollama provides a REST API for running and managing large language models locally.
    Supports various models including Llama, Mistral, Qwen, and more.
  version: 1.0.0
  contact:
    name: Ollama
    url: https://ollama.com/
  license:
    name: MIT

servers:
  - url: http://69.62.108.82:11435
    description: Production server (local access)

tags:
  - name: Models
    description: Model management operations
  - name: Generation
    description: Text generation and chat
  - name: Embeddings
    description: Generate embeddings

paths:
  /api/generate:
    post:
      tags:
        - Generation
      summary: Generate completion
      description: Generate a response from a model
      operationId: generate
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              required:
                - model
                - prompt
              properties:
                model:
                  type: string
                  description: Model name
                  example: "mistral:7b"
                prompt:
                  type: string
                  description: Prompt for generation
                  example: "Why is the sky blue?"
                stream:
                  type: boolean
                  default: true
                options:
                  type: object
                  properties:
                    temperature:
                      type: number
                    top_p:
                      type: number
                    top_k:
                      type: integer
      responses:
        '200':
          description: Generated response
          content:
            application/json:
              schema:
                type: object
                properties:
                  model:
                    type: string
                  created_at:
                    type: string
                  response:
                    type: string
                  done:
                    type: boolean

  /api/chat:
    post:
      tags:
        - Generation
      summary: Chat with model
      description: Generate a chat completion
      operationId: chat
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              required:
                - model
                - messages
              properties:
                model:
                  type: string
                  example: "mistral:7b"
                messages:
                  type: array
                  items:
                    type: object
                    properties:
                      role:
                        type: string
                        enum: [system, user, assistant]
                      content:
                        type: string
                  example:
                    - role: "user"
                      content: "Hello!"
                stream:
                  type: boolean
                  default: true
      responses:
        '200':
          description: Chat response
          content:
            application/json:
              schema:
                type: object
                properties:
                  model:
                    type: string
                  created_at:
                    type: string
                  message:
                    type: object
                    properties:
                      role:
                        type: string
                      content:
                        type: string
                  done:
                    type: boolean

  /api/tags:
    get:
      tags:
        - Models
      summary: List models
      description: List models available locally
      operationId: listModels
      responses:
        '200':
          description: List of models
          content:
            application/json:
              schema:
                type: object
                properties:
                  models:
                    type: array
                    items:
                      type: object
                      properties:
                        name:
                          type: string
                        model:
                          type: string
                        modified_at:
                          type: string
                        size:
                          type: integer
                        digest:
                          type: string

  /api/pull:
    post:
      tags:
        - Models
      summary: Pull a model
      description: Download a model from registry
      operationId: pullModel
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              required:
                - name
              properties:
                name:
                  type: string
                  description: Model name
                  example: "mistral:7b"
                insecure:
                  type: boolean
                  default: false
                stream:
                  type: boolean
                  default: true
      responses:
        '200':
          description: Pull progress
          content:
            application/json:
              schema:
                type: object
                properties:
                  status:
                    type: string
                  total:
                    type: integer
                  completed:
                    type: integer

  /api/push:
    post:
      tags:
        - Models
      summary: Push a model
      description: Push a model to registry
      operationId: pushModel
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              required:
                - name
              properties:
                name:
                  type: string
                insecure:
                  type: boolean
                stream:
                  type: boolean
      responses:
        '200':
          description: Push progress

  /api/create:
    post:
      tags:
        - Models
      summary: Create a model
      description: Create a model from a Modelfile
      operationId: createModel
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              required:
                - name
                - modelfile
              properties:
                name:
                  type: string
                modelfile:
                  type: string
                stream:
                  type: boolean
      responses:
        '200':
          description: Creation progress

  /api/delete:
    delete:
      tags:
        - Models
      summary: Delete a model
      description: Remove a model from local storage
      operationId: deleteModel
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              required:
                - name
              properties:
                name:
                  type: string
                  example: "mistral:7b"
      responses:
        '200':
          description: Model deleted

  /api/show:
    post:
      tags:
        - Models
      summary: Show model info
      description: Get detailed information about a model
      operationId: showModel
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              required:
                - name
              properties:
                name:
                  type: string
      responses:
        '200':
          description: Model information
          content:
            application/json:
              schema:
                type: object
                properties:
                  modelfile:
                    type: string
                  parameters:
                    type: string
                  template:
                    type: string
                  details:
                    type: object

  /api/copy:
    post:
      tags:
        - Models
      summary: Copy a model
      description: Create a copy of a model with a new name
      operationId: copyModel
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              required:
                - source
                - destination
              properties:
                source:
                  type: string
                destination:
                  type: string
      responses:
        '200':
          description: Model copied

  /api/embeddings:
    post:
      tags:
        - Embeddings
      summary: Generate embeddings
      description: Generate embeddings from text
      operationId: generateEmbeddings
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              required:
                - model
                - prompt
              properties:
                model:
                  type: string
                prompt:
                  type: string
      responses:
        '200':
          description: Embeddings
          content:
            application/json:
              schema:
                type: object
                properties:
                  embedding:
                    type: array
                    items:
                      type: number

components:
  schemas: {}
