
<!doctype html>
<html lang="fr" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
        <meta name="description" content="Documentation complète pour srv759970.hstgr.cloud">
      
      
        <meta name="author" content="Julien Fernandez">
      
      
        <link rel="canonical" href="https://docs.srv759970.hstgr.cloud/02-applications/guides/cache-wordpress/">
      
      
        <link rel="prev" href="../wordpress-multisite/">
      
      
        <link rel="next" href="../astro-deployment/">
      
      
      <link rel="icon" href="../../../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.6.22">
    
    
      
        <title>WordPress Cache - Hostinger Server Documentation</title>
      
    
    
      <link rel="stylesheet" href="../../../assets/stylesheets/main.84d31ad4.min.css">
      
        
        <link rel="stylesheet" href="../../../assets/stylesheets/palette.06af60db.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
    <script>__md_scope=new URL("../../..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    
    
      
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="indigo" data-md-color-accent="indigo">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#guide-cache-nginx-pour-wordpress" class="md-skip">
          Aller au contenu
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

  

<header class="md-header md-header--shadow md-header--lifted" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="En-tête">
    <a href="../../.." title="Hostinger Server Documentation" class="md-header__button md-logo" aria-label="Hostinger Server Documentation" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            Hostinger Server Documentation
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              WordPress Cache
            
          </span>
        </div>
      </div>
    </div>
    
      
        <form class="md-header__option" data-md-component="palette">
  
    
    
    
    <input class="md-option" data-md-color-media="(prefers-color-scheme: light)" data-md-color-scheme="default" data-md-color-primary="indigo" data-md-color-accent="indigo"  aria-label="Mode sombre"  type="radio" name="__palette" id="__palette_0">
    
      <label class="md-header__button md-icon" title="Mode sombre" for="__palette_1" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a4 4 0 0 0-4 4 4 4 0 0 0 4 4 4 4 0 0 0 4-4 4 4 0 0 0-4-4m0 10a6 6 0 0 1-6-6 6 6 0 0 1 6-6 6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12z"/></svg>
      </label>
    
  
    
    
    
    <input class="md-option" data-md-color-media="(prefers-color-scheme: dark)" data-md-color-scheme="slate" data-md-color-primary="indigo" data-md-color-accent="indigo"  aria-label="Mode clair"  type="radio" name="__palette" id="__palette_1">
    
      <label class="md-header__button md-icon" title="Mode clair" for="__palette_0" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 18c-.89 0-1.74-.2-2.5-.55C11.56 16.5 13 14.42 13 12s-1.44-4.5-3.5-5.45C10.26 6.2 11.11 6 12 6a6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12z"/></svg>
      </label>
    
  
</form>
      
    
    
      <script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
    
      
      
        <label class="md-header__button md-icon" for="__search">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        </label>
        <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Rechercher" placeholder="Rechercher" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Recherche">
        
        <button type="reset" class="md-search__icon md-icon" title="Effacer" aria-label="Effacer" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>
        </button>
      </nav>
      
        <div class="md-search__suggest" data-md-component="search-suggest"></div>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initialisation de la recherche
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
      
    
    
  </nav>
  
    
      
<nav class="md-tabs" aria-label="Onglets" data-md-component="tabs">
  <div class="md-grid">
    <ul class="md-tabs__list">
      
        
  
  
  
  
    <li class="md-tabs__item">
      <a href="../../.." class="md-tabs__link">
        
  
  
    
  
  Accueil

      </a>
    </li>
  

      
        
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../../01-infrastructure/" class="md-tabs__link">
          
  
  
    
  
  Infrastructure

        </a>
      </li>
    
  

      
        
  
  
  
    
  
  
    
    
      <li class="md-tabs__item md-tabs__item--active">
        <a href="../../" class="md-tabs__link">
          
  
  
    
  
  Applications

        </a>
      </li>
    
  

      
        
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../../03-operations/backup/" class="md-tabs__link">
          
  
  
    
  
  Opérations

        </a>
      </li>
    
  

      
        
  
  
  
  
    
    
      
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../../04-reference/docker/commands/" class="md-tabs__link">
          
  
  
    
  
  Référence Technique

        </a>
      </li>
    
  

    
  

      
        
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../../05-advanced/api-portal/" class="md-tabs__link">
          
  
  
    
  
  Advanced

        </a>
      </li>
    
  

      
        
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../../06-changelog/autostart-v2/" class="md-tabs__link">
          
  
  
    
  
  Changelog

        </a>
      </li>
    
  

      
        
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../../99-dynamic/server-status/" class="md-tabs__link">
          
  
  
    
  
  État Temps Réel

        </a>
      </li>
    
  

      
    </ul>
  </div>
</nav>
    
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


  


<nav class="md-nav md-nav--primary md-nav--lifted" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../../.." title="Hostinger Server Documentation" class="md-nav__button md-logo" aria-label="Hostinger Server Documentation" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    Hostinger Server Documentation
  </label>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../.." class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Accueil
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
          
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2" >
        
          
          <div class="md-nav__link md-nav__container">
            <a href="../../../01-infrastructure/" class="md-nav__link ">
              
  
  
  <span class="md-ellipsis">
    Infrastructure
    
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_2" id="__nav_2_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2">
            <span class="md-nav__icon md-icon"></span>
            Infrastructure
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../01-infrastructure/server/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Serveur & Config
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../01-infrastructure/nginx/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Nginx Manager
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../01-infrastructure/nginx-troubleshooting/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Nginx Troubleshooting
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../01-infrastructure/databases/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Bases de Données
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../01-infrastructure/databases-shared-detailed/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Databases Shared (détaillé)
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../01-infrastructure/docker/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Docker Architecture
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../01-infrastructure/security/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Sécurité
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../01-infrastructure/architecture-dependencies/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Architecture & Dépendances
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../01-infrastructure/environment-setup/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Environment Setup
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../01-infrastructure/email-smtp/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Email SMTP
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../01-infrastructure/basic-auth/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Basic Auth
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
    
  
  
  
    
    
      
        
          
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
    
      
        
        
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3" checked>
        
          
          <div class="md-nav__link md-nav__container">
            <a href="../../" class="md-nav__link ">
              
  
  
  <span class="md-ellipsis">
    Applications
    
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_3" id="__nav_3_label" tabindex="">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_3_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_3">
            <span class="md-nav__icon md-icon"></span>
            Applications
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    
    
      
        
      
        
      
    
    
    
      
      
        
          
          
        
      
    
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3_2" >
        
          
          <label class="md-nav__link" for="__nav_3_2" id="__nav_3_2_label" tabindex="">
            
  
  
  <span class="md-ellipsis">
    WordPress
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_3_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3_2">
            <span class="md-nav__icon md-icon"></span>
            WordPress
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../wordpress/clemence/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Clemence
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../wordpress/solidarlink/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    SolidarLink
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
      
        
      
    
    
    
      
      
        
          
          
        
      
    
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3_3" >
        
          
          <label class="md-nav__link" for="__nav_3_3" id="__nav_3_3_label" tabindex="">
            
  
  
  <span class="md-ellipsis">
    AI Transcription
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_3_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3_3">
            <span class="md-nav__icon md-icon"></span>
            AI Transcription
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../ai-transcription/whisperx/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    WhisperX
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../ai-transcription/faster-whisper/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Faster-Whisper
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
      
        
      
    
    
    
      
      
        
          
          
        
      
    
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3_4" >
        
          
          <label class="md-nav__link" for="__nav_3_4" id="__nav_3_4_label" tabindex="">
            
  
  
  <span class="md-ellipsis">
    AI Services
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_3_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3_4">
            <span class="md-nav__icon md-icon"></span>
            AI Services
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../ai-services/ollama/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Ollama
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../ai-services/tika/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Tika
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
      
        
      
    
    
    
      
      
        
          
          
        
      
    
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3_5" >
        
          
          <label class="md-nav__link" for="__nav_3_5" id="__nav_3_5_label" tabindex="">
            
  
  
  <span class="md-ellipsis">
    AI TTS
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_3_5_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3_5">
            <span class="md-nav__icon md-icon"></span>
            AI TTS
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../ai-tts/neutts/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    NeuTTS
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../ai-tts/xtts/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    XTTS
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
      
    
    
    
      
      
        
          
          
        
      
    
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3_6" >
        
          
          <label class="md-nav__link" for="__nav_3_6" id="__nav_3_6_label" tabindex="">
            
  
  
  <span class="md-ellipsis">
    AI RAG
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_3_6_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3_6">
            <span class="md-nav__icon md-icon"></span>
            AI RAG
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../ai-rag/ragflow/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    RAGFlow
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
      
    
    
    
      
      
        
          
          
        
      
    
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3_7" >
        
          
          <label class="md-nav__link" for="__nav_3_7" id="__nav_3_7_label" tabindex="">
            
  
  
  <span class="md-ellipsis">
    Bots
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_3_7_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3_7">
            <span class="md-nav__icon md-icon"></span>
            Bots
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../bots/telegram-bot/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Telegram Bot
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
      
        
      
    
    
    
      
      
        
          
          
        
      
    
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3_8" >
        
          
          <label class="md-nav__link" for="__nav_3_8" id="__nav_3_8_label" tabindex="">
            
  
  
  <span class="md-ellipsis">
    CMS & Sites
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_3_8_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3_8">
            <span class="md-nav__icon md-icon"></span>
            CMS & Sites
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../cms-sites/cristina-site/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Cristina Site
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../cms-sites/impro-manager/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Impro Manager
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
      
        
      
        
      
    
    
    
      
      
        
          
          
        
      
    
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3_9" >
        
          
          <label class="md-nav__link" for="__nav_3_9" id="__nav_3_9_label" tabindex="">
            
  
  
  <span class="md-ellipsis">
    Collaboration
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_3_9_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3_9">
            <span class="md-nav__icon md-icon"></span>
            Collaboration
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../collaboration/nextcloud/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Nextcloud
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../collaboration/rocketchat/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    RocketChat
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../collaboration/jitsi/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Jitsi
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
      
        
      
    
    
    
      
      
        
          
          
        
      
    
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3_10" >
        
          
          <label class="md-nav__link" for="__nav_3_10" id="__nav_3_10_label" tabindex="">
            
  
  
  <span class="md-ellipsis">
    Documents
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_3_10_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3_10">
            <span class="md-nav__icon md-icon"></span>
            Documents
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../documents/paperless-ngx/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Paperless NGX
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../documents/paperless-ai/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Paperless AI
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
      
    
    
    
      
      
        
          
          
        
      
    
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3_11" >
        
          
          <label class="md-nav__link" for="__nav_3_11" id="__nav_3_11_label" tabindex="">
            
  
  
  <span class="md-ellipsis">
    Automation
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_3_11_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3_11">
            <span class="md-nav__icon md-icon"></span>
            Automation
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../automation/n8n/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    N8N
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
      
    
    
    
      
      
        
          
          
        
      
    
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3_12" >
        
          
          <label class="md-nav__link" for="__nav_3_12" id="__nav_3_12_label" tabindex="">
            
  
  
  <span class="md-ellipsis">
    Dashboards
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_3_12_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3_12">
            <span class="md-nav__icon md-icon"></span>
            Dashboards
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../dashboards/energie-dashboard/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Energie Dashboard
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
      
        
      
        
      
        
      
        
      
    
    
    
      
      
        
          
          
        
      
    
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3_13" >
        
          
          <label class="md-nav__link" for="__nav_3_13" id="__nav_3_13_label" tabindex="">
            
  
  
  <span class="md-ellipsis">
    Monitoring
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_3_13_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3_13">
            <span class="md-nav__icon md-icon"></span>
            Monitoring
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../monitoring/monitoring-stack/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Monitoring Stack
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../monitoring/dashy/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Dashy Portal
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../monitoring/dozzle/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Dozzle
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../monitoring/glances/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Glances
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../monitoring/portainer/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Portainer
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
    
  
  
  
    
    
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
    
      
      
        
          
          
        
      
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3_14" checked>
        
          
          <label class="md-nav__link" for="__nav_3_14" id="__nav_3_14_label" tabindex="">
            
  
  
  <span class="md-ellipsis">
    Guides Déploiement
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_3_14_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_3_14">
            <span class="md-nav__icon md-icon"></span>
            Guides Déploiement
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../ollama-setup/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Ollama Setup
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../tika-deployment/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Tika Deployment
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../whisper-deployment/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Whisper Deployment
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../whisperx-monitoring/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    WhisperX Monitoring
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../wordpress-docker/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    WordPress Docker
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../wordpress-multisite/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    WordPress Multisite
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  
  <span class="md-ellipsis">
    WordPress Cache
    
  </span>
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  
  <span class="md-ellipsis">
    WordPress Cache
    
  </span>
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table des matières">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table des matières
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#objectif" class="md-nav__link">
    <span class="md-ellipsis">
      Objectif
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#architecture" class="md-nav__link">
    <span class="md-ellipsis">
      Architecture
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#configuration" class="md-nav__link">
    <span class="md-ellipsis">
      Configuration
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Configuration">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#1-zone-de-cache-globale" class="md-nav__link">
    <span class="md-ellipsis">
      1. Zone de cache globale
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#2-inclusion-dans-nginxconf" class="md-nav__link">
    <span class="md-ellipsis">
      2. Inclusion dans nginx.conf
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#3-configuration-par-site" class="md-nav__link">
    <span class="md-ellipsis">
      3. Configuration par site
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#directives-importantes" class="md-nav__link">
    <span class="md-ellipsis">
      Directives importantes
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Directives importantes">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#proxy_cache-wordpress" class="md-nav__link">
    <span class="md-ellipsis">
      proxy_cache WORDPRESS
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#proxy_cache_bypass-skip_cache" class="md-nav__link">
    <span class="md-ellipsis">
      proxy_cache_bypass $skip_cache
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#proxy_no_cache-skip_cache" class="md-nav__link">
    <span class="md-ellipsis">
      proxy_no_cache $skip_cache
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#proxy_cache_valid" class="md-nav__link">
    <span class="md-ellipsis">
      proxy_cache_valid
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#proxy_cache_use_stale" class="md-nav__link">
    <span class="md-ellipsis">
      proxy_cache_use_stale
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#proxy_cache_lock" class="md-nav__link">
    <span class="md-ellipsis">
      proxy_cache_lock
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#add_header-x-cache-status" class="md-nav__link">
    <span class="md-ellipsis">
      add_header X-Cache-Status
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#quand-le-cache-est-il-utilise" class="md-nav__link">
    <span class="md-ellipsis">
      Quand le cache est-il utilisé ?
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Quand le cache est-il utilisé ?">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#pages-mises-en-cache" class="md-nav__link">
    <span class="md-ellipsis">
      ✅ Pages mises en cache
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pages-non-mises-en-cache" class="md-nav__link">
    <span class="md-ellipsis">
      ❌ Pages NON mises en cache
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#verification-et-monitoring" class="md-nav__link">
    <span class="md-ellipsis">
      Vérification et monitoring
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Vérification et monitoring">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#verifier-que-le-cache-fonctionne" class="md-nav__link">
    <span class="md-ellipsis">
      Vérifier que le cache fonctionne
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#statistiques-du-cache" class="md-nav__link">
    <span class="md-ellipsis">
      Statistiques du cache
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#logs" class="md-nav__link">
    <span class="md-ellipsis">
      Logs
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#gestion-du-cache" class="md-nav__link">
    <span class="md-ellipsis">
      Gestion du cache
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Gestion du cache">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#purger-tout-le-cache" class="md-nav__link">
    <span class="md-ellipsis">
      Purger tout le cache
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#purger-le-cache-dun-site-specifique" class="md-nav__link">
    <span class="md-ellipsis">
      Purger le cache d'un site spécifique
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#recharger-la-configuration" class="md-nav__link">
    <span class="md-ellipsis">
      Recharger la configuration
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#tuning-et-optimisation" class="md-nav__link">
    <span class="md-ellipsis">
      Tuning et optimisation
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Tuning et optimisation">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#augmenter-la-taille-du-cache" class="md-nav__link">
    <span class="md-ellipsis">
      Augmenter la taille du cache
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ajuster-la-duree-de-cache" class="md-nav__link">
    <span class="md-ellipsis">
      Ajuster la durée de cache
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#exclure-des-uris-supplementaires" class="md-nav__link">
    <span class="md-ellipsis">
      Exclure des URIs supplémentaires
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#cache-conditionnel-par-query-string" class="md-nav__link">
    <span class="md-ellipsis">
      Cache conditionnel par query string
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#troubleshooting" class="md-nav__link">
    <span class="md-ellipsis">
      Troubleshooting
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Troubleshooting">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#cache-ne-semble-pas-fonctionner" class="md-nav__link">
    <span class="md-ellipsis">
      Cache ne semble pas fonctionner
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#reponses-stale-servies-trop-souvent" class="md-nav__link">
    <span class="md-ellipsis">
      Réponses stale servies trop souvent
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#espace-disque-plein" class="md-nav__link">
    <span class="md-ellipsis">
      Espace disque plein
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#cache-invalide-apres-mise-a-jour-wordpress" class="md-nav__link">
    <span class="md-ellipsis">
      Cache invalide après mise à jour WordPress
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#performance-attendue" class="md-nav__link">
    <span class="md-ellipsis">
      Performance attendue
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Performance attendue">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#avant-cache-proxy-direct" class="md-nav__link">
    <span class="md-ellipsis">
      Avant cache (proxy direct)
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#apres-cache" class="md-nav__link">
    <span class="md-ellipsis">
      Après cache
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#securite" class="md-nav__link">
    <span class="md-ellipsis">
      Sécurité
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Sécurité">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#considerations" class="md-nav__link">
    <span class="md-ellipsis">
      Considérations
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#risques-potentiels" class="md-nav__link">
    <span class="md-ellipsis">
      Risques potentiels
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#compatibilite" class="md-nav__link">
    <span class="md-ellipsis">
      Compatibilité
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Compatibilité">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#plugins-wordpress" class="md-nav__link">
    <span class="md-ellipsis">
      Plugins WordPress
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#auto-start-system" class="md-nav__link">
    <span class="md-ellipsis">
      Auto-Start System
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#metriques-de-succes" class="md-nav__link">
    <span class="md-ellipsis">
      Métriques de succès
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Métriques de succès">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#phase-de-test-1-semaine" class="md-nav__link">
    <span class="md-ellipsis">
      Phase de test (1 semaine)
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#production-1-mois" class="md-nav__link">
    <span class="md-ellipsis">
      Production (1 mois)
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#references" class="md-nav__link">
    <span class="md-ellipsis">
      Références
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#nginx-helper-plugin-purge-automatique" class="md-nav__link">
    <span class="md-ellipsis">
      Nginx Helper Plugin - Purge automatique
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Nginx Helper Plugin - Purge automatique">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#installation-et-configuration" class="md-nav__link">
    <span class="md-ellipsis">
      Installation et configuration
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#historique-des-modifications" class="md-nav__link">
    <span class="md-ellipsis">
      Historique des modifications
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#todo" class="md-nav__link">
    <span class="md-ellipsis">
      TODO
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../astro-deployment/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Astro Deployment
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../strapi-setup/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Strapi Setup
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../videorag-docker/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    VideoRAG Docker
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../videorag-systemd/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    VideoRAG Systemd
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../jitsi-transcription/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Jitsi Transcription
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../n8n-setup/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    N8N Setup
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../rustdesk-deployment/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    RustDesk Deployment
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../live-status-page/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Live Status Page
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4" >
        
          
          <label class="md-nav__link" for="__nav_4" id="__nav_4_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Opérations
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4">
            <span class="md-nav__icon md-icon"></span>
            Opérations
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../03-operations/backup/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Backup & Restore
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../03-operations/cloudflare/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Cloudflare Setup
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../03-operations/dependency-wake-chain/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Dependency Wake Chain
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../03-operations/docker-autostop/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Docker AutoStop Strategy
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../03-operations/docker-autostart/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Docker AutoStart
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../03-operations/deployment-docker-autostart/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Docker AutoStart Setup
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../03-operations/deployment-systemd/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Systemd Services
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../03-operations/vps-setup/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    VPS Initial Setup
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../03-operations/emergency-runbook/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Emergency Runbook
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
      
        
      
        
      
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_5" >
        
          
          <label class="md-nav__link" for="__nav_5" id="__nav_5_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Référence Technique
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_5_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_5">
            <span class="md-nav__icon md-icon"></span>
            Référence Technique
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    
    
      
        
      
        
      
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_5_1" >
        
          
          <label class="md-nav__link" for="__nav_5_1" id="__nav_5_1_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Docker
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_5_1_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_5_1">
            <span class="md-nav__icon md-icon"></span>
            Docker
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../04-reference/docker/commands/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Commands
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../04-reference/docker/compose-patterns/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Compose Patterns
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
      
        
      
        
      
        
      
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_5_2" >
        
          
          <label class="md-nav__link" for="__nav_5_2" id="__nav_5_2_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Nginx
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_5_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_5_2">
            <span class="md-nav__icon md-icon"></span>
            Nginx
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../04-reference/nginx/debugging/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Debugging
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../04-reference/nginx/proxy-config/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Proxy Config
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../04-reference/nginx/proxy-headers/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Proxy Headers
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../04-reference/nginx/ssl-config/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    SSL Config
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
      
        
      
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_5_3" >
        
          
          <label class="md-nav__link" for="__nav_5_3" id="__nav_5_3_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Security
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_5_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_5_3">
            <span class="md-nav__icon md-icon"></span>
            Security
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../04-reference/security/basic-auth/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Basic Auth
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../04-reference/security/ssl-certbot/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    SSL Certbot
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_6" >
        
          
          <label class="md-nav__link" for="__nav_6" id="__nav_6_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Advanced
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_6_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_6">
            <span class="md-nav__icon md-icon"></span>
            Advanced
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../05-advanced/api-portal/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    API Portal
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../05-advanced/devops-best-practices/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    DevOps Best Practices
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../05-advanced/llm-usage/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    LLM Usage
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../05-advanced/llm-onboarding/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    LLM Onboarding
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../05-advanced/mcp-servers/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    MCP Servers
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../05-advanced/photo-ai/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Photo AI
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../05-advanced/templates-patterns/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Templates & Patterns
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../05-advanced/git-policy/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Git Policy
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../05-advanced/auth-strategy-oauth-vs-basic/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Auth Strategy OAuth vs Basic
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_7" >
        
          
          <label class="md-nav__link" for="__nav_7" id="__nav_7_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Changelog
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_7_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_7">
            <span class="md-nav__icon md-icon"></span>
            Changelog
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../06-changelog/autostart-v2/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Autostart v2
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../06-changelog/bot-protection-2025-10-23/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Bot Protection 2025-10-23
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../06-changelog/dashy-autostart-fix-2025-10-24/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Dashy Autostart Fix
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../06-changelog/deployment-2025-10-20/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Deployment 2025-10-20
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../06-changelog/docs-improvement-2025-10-27/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Docs Improvement 2025-10-27
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../06-changelog/docs-refactoring-2025-10-23/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Docs Refactoring 2025-10-23
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
      
        
      
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_8" >
        
          
          <label class="md-nav__link" for="__nav_8" id="__nav_8_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    État Temps Réel
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_8_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_8">
            <span class="md-nav__icon md-icon"></span>
            État Temps Réel
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../99-dynamic/server-status/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Server Status
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../99-dynamic/services-status/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Services Status
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table des matières">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table des matières
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#objectif" class="md-nav__link">
    <span class="md-ellipsis">
      Objectif
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#architecture" class="md-nav__link">
    <span class="md-ellipsis">
      Architecture
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#configuration" class="md-nav__link">
    <span class="md-ellipsis">
      Configuration
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Configuration">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#1-zone-de-cache-globale" class="md-nav__link">
    <span class="md-ellipsis">
      1. Zone de cache globale
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#2-inclusion-dans-nginxconf" class="md-nav__link">
    <span class="md-ellipsis">
      2. Inclusion dans nginx.conf
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#3-configuration-par-site" class="md-nav__link">
    <span class="md-ellipsis">
      3. Configuration par site
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#directives-importantes" class="md-nav__link">
    <span class="md-ellipsis">
      Directives importantes
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Directives importantes">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#proxy_cache-wordpress" class="md-nav__link">
    <span class="md-ellipsis">
      proxy_cache WORDPRESS
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#proxy_cache_bypass-skip_cache" class="md-nav__link">
    <span class="md-ellipsis">
      proxy_cache_bypass $skip_cache
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#proxy_no_cache-skip_cache" class="md-nav__link">
    <span class="md-ellipsis">
      proxy_no_cache $skip_cache
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#proxy_cache_valid" class="md-nav__link">
    <span class="md-ellipsis">
      proxy_cache_valid
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#proxy_cache_use_stale" class="md-nav__link">
    <span class="md-ellipsis">
      proxy_cache_use_stale
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#proxy_cache_lock" class="md-nav__link">
    <span class="md-ellipsis">
      proxy_cache_lock
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#add_header-x-cache-status" class="md-nav__link">
    <span class="md-ellipsis">
      add_header X-Cache-Status
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#quand-le-cache-est-il-utilise" class="md-nav__link">
    <span class="md-ellipsis">
      Quand le cache est-il utilisé ?
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Quand le cache est-il utilisé ?">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#pages-mises-en-cache" class="md-nav__link">
    <span class="md-ellipsis">
      ✅ Pages mises en cache
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pages-non-mises-en-cache" class="md-nav__link">
    <span class="md-ellipsis">
      ❌ Pages NON mises en cache
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#verification-et-monitoring" class="md-nav__link">
    <span class="md-ellipsis">
      Vérification et monitoring
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Vérification et monitoring">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#verifier-que-le-cache-fonctionne" class="md-nav__link">
    <span class="md-ellipsis">
      Vérifier que le cache fonctionne
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#statistiques-du-cache" class="md-nav__link">
    <span class="md-ellipsis">
      Statistiques du cache
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#logs" class="md-nav__link">
    <span class="md-ellipsis">
      Logs
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#gestion-du-cache" class="md-nav__link">
    <span class="md-ellipsis">
      Gestion du cache
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Gestion du cache">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#purger-tout-le-cache" class="md-nav__link">
    <span class="md-ellipsis">
      Purger tout le cache
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#purger-le-cache-dun-site-specifique" class="md-nav__link">
    <span class="md-ellipsis">
      Purger le cache d'un site spécifique
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#recharger-la-configuration" class="md-nav__link">
    <span class="md-ellipsis">
      Recharger la configuration
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#tuning-et-optimisation" class="md-nav__link">
    <span class="md-ellipsis">
      Tuning et optimisation
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Tuning et optimisation">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#augmenter-la-taille-du-cache" class="md-nav__link">
    <span class="md-ellipsis">
      Augmenter la taille du cache
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ajuster-la-duree-de-cache" class="md-nav__link">
    <span class="md-ellipsis">
      Ajuster la durée de cache
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#exclure-des-uris-supplementaires" class="md-nav__link">
    <span class="md-ellipsis">
      Exclure des URIs supplémentaires
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#cache-conditionnel-par-query-string" class="md-nav__link">
    <span class="md-ellipsis">
      Cache conditionnel par query string
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#troubleshooting" class="md-nav__link">
    <span class="md-ellipsis">
      Troubleshooting
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Troubleshooting">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#cache-ne-semble-pas-fonctionner" class="md-nav__link">
    <span class="md-ellipsis">
      Cache ne semble pas fonctionner
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#reponses-stale-servies-trop-souvent" class="md-nav__link">
    <span class="md-ellipsis">
      Réponses stale servies trop souvent
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#espace-disque-plein" class="md-nav__link">
    <span class="md-ellipsis">
      Espace disque plein
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#cache-invalide-apres-mise-a-jour-wordpress" class="md-nav__link">
    <span class="md-ellipsis">
      Cache invalide après mise à jour WordPress
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#performance-attendue" class="md-nav__link">
    <span class="md-ellipsis">
      Performance attendue
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Performance attendue">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#avant-cache-proxy-direct" class="md-nav__link">
    <span class="md-ellipsis">
      Avant cache (proxy direct)
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#apres-cache" class="md-nav__link">
    <span class="md-ellipsis">
      Après cache
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#securite" class="md-nav__link">
    <span class="md-ellipsis">
      Sécurité
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Sécurité">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#considerations" class="md-nav__link">
    <span class="md-ellipsis">
      Considérations
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#risques-potentiels" class="md-nav__link">
    <span class="md-ellipsis">
      Risques potentiels
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#compatibilite" class="md-nav__link">
    <span class="md-ellipsis">
      Compatibilité
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Compatibilité">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#plugins-wordpress" class="md-nav__link">
    <span class="md-ellipsis">
      Plugins WordPress
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#auto-start-system" class="md-nav__link">
    <span class="md-ellipsis">
      Auto-Start System
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#metriques-de-succes" class="md-nav__link">
    <span class="md-ellipsis">
      Métriques de succès
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Métriques de succès">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#phase-de-test-1-semaine" class="md-nav__link">
    <span class="md-ellipsis">
      Phase de test (1 semaine)
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#production-1-mois" class="md-nav__link">
    <span class="md-ellipsis">
      Production (1 mois)
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#references" class="md-nav__link">
    <span class="md-ellipsis">
      Références
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#nginx-helper-plugin-purge-automatique" class="md-nav__link">
    <span class="md-ellipsis">
      Nginx Helper Plugin - Purge automatique
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Nginx Helper Plugin - Purge automatique">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#installation-et-configuration" class="md-nav__link">
    <span class="md-ellipsis">
      Installation et configuration
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#historique-des-modifications" class="md-nav__link">
    <span class="md-ellipsis">
      Historique des modifications
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#todo" class="md-nav__link">
    <span class="md-ellipsis">
      TODO
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  



<h1 id="guide-cache-nginx-pour-wordpress">Guide Cache Nginx pour WordPress<a class="headerlink" href="#guide-cache-nginx-pour-wordpress" title="Permanent link">&para;</a></h1>
<p><strong>Dernière mise à jour</strong> : 18 octobre 2025
<strong>Serveur</strong> : srv759970.hstgr.cloud (69.62.108.82)
<strong>Sites concernés</strong> : clemence.srv759970.hstgr.cloud, solidarlink.srv759970.hstgr.cloud</p>
<hr />
<h2 id="objectif">Objectif<a class="headerlink" href="#objectif" title="Permanent link">&para;</a></h2>
<p>Améliorer les performances des sites WordPress en mettant en cache les réponses HTTP au niveau du reverse proxy Nginx, réduisant ainsi la charge sur les containers WordPress et accélérant le temps de réponse pour les visiteurs.</p>
<p><strong>Bénéfices attendus</strong> :
- ✅ Temps de chargement 2-3x plus rapide pour les pages mises en cache
- ✅ Réduction de la charge CPU/RAM sur les containers WordPress
- ✅ Meilleure expérience utilisateur
- ✅ Gestion automatique du cache (purge, invalidation)</p>
<hr />
<h2 id="architecture">Architecture<a class="headerlink" href="#architecture" title="Permanent link">&para;</a></h2>
<div class="language-text highlight"><pre><span></span><code><span id="__span-0-1"><a id="__codelineno-0-1" name="__codelineno-0-1" href="#__codelineno-0-1"></a>Client HTTPS Request
</span><span id="__span-0-2"><a id="__codelineno-0-2" name="__codelineno-0-2" href="#__codelineno-0-2"></a>     ↓
</span><span id="__span-0-3"><a id="__codelineno-0-3" name="__codelineno-0-3" href="#__codelineno-0-3"></a>Nginx (Port 443) - SSL Termination + Basic Auth
</span><span id="__span-0-4"><a id="__codelineno-0-4" name="__codelineno-0-4" href="#__codelineno-0-4"></a>     ↓
</span><span id="__span-0-5"><a id="__codelineno-0-5" name="__codelineno-0-5" href="#__codelineno-0-5"></a>Proxy Cache Layer ← NOUVEAU !
</span><span id="__span-0-6"><a id="__codelineno-0-6" name="__codelineno-0-6" href="#__codelineno-0-6"></a>     ↓
</span><span id="__span-0-7"><a id="__codelineno-0-7" name="__codelineno-0-7" href="#__codelineno-0-7"></a>Auto-Start Proxy (Port 8890)
</span><span id="__span-0-8"><a id="__codelineno-0-8" name="__codelineno-0-8" href="#__codelineno-0-8"></a>     ↓
</span><span id="__span-0-9"><a id="__codelineno-0-9" name="__codelineno-0-9" href="#__codelineno-0-9"></a>WordPress Container (Port 9002 ou 9003)
</span></code></pre></div>
<p>Le cache intercepte les réponses des containers WordPress et les stocke sur disque. Les requêtes suivantes sont servies directement depuis le cache sans solliciter le container.</p>
<hr />
<h2 id="configuration">Configuration<a class="headerlink" href="#configuration" title="Permanent link">&para;</a></h2>
<h3 id="1-zone-de-cache-globale">1. Zone de cache globale<a class="headerlink" href="#1-zone-de-cache-globale" title="Permanent link">&para;</a></h3>
<p><strong>Fichier</strong> : <code>/etc/nginx/snippets/wordpress-cache.conf</code></p>
<div class="language-nginx highlight"><pre><span></span><code><span id="__span-1-1"><a id="__codelineno-1-1" name="__codelineno-1-1" href="#__codelineno-1-1"></a><span class="c1"># WordPress Proxy Cache Configuration</span>
</span><span id="__span-1-2"><a id="__codelineno-1-2" name="__codelineno-1-2" href="#__codelineno-1-2"></a><span class="k">proxy_cache_path</span><span class="w"> </span><span class="s">/var/cache/nginx/wordpress</span><span class="w"> </span><span class="s">levels=1:2</span><span class="w"> </span><span class="s">keys_zone=WORDPRESS:100m</span><span class="w"> </span><span class="s">max_size=500m</span><span class="w"> </span><span class="s">inactive=60m</span><span class="w"> </span><span class="s">use_temp_path=off</span><span class="p">;</span>
</span><span id="__span-1-3"><a id="__codelineno-1-3" name="__codelineno-1-3" href="#__codelineno-1-3"></a><span class="k">proxy_cache_key</span><span class="w"> </span><span class="nv">$scheme$request_method$host$request_uri</span><span class="p">;</span>
</span><span id="__span-1-4"><a id="__codelineno-1-4" name="__codelineno-1-4" href="#__codelineno-1-4"></a>
</span><span id="__span-1-5"><a id="__codelineno-1-5" name="__codelineno-1-5" href="#__codelineno-1-5"></a><span class="c1"># Bypass cache pour méthodes POST</span>
</span><span id="__span-1-6"><a id="__codelineno-1-6" name="__codelineno-1-6" href="#__codelineno-1-6"></a><span class="k">map</span><span class="w"> </span><span class="nv">$request_method</span><span class="w"> </span><span class="nv">$skip_cache_method</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-1-7"><a id="__codelineno-1-7" name="__codelineno-1-7" href="#__codelineno-1-7"></a><span class="w">    </span><span class="kn">default</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span>
</span><span id="__span-1-8"><a id="__codelineno-1-8" name="__codelineno-1-8" href="#__codelineno-1-8"></a><span class="w">    </span><span class="kn">POST</span><span class="w">    </span><span class="mi">1</span><span class="p">;</span>
</span><span id="__span-1-9"><a id="__codelineno-1-9" name="__codelineno-1-9" href="#__codelineno-1-9"></a><span class="p">}</span>
</span><span id="__span-1-10"><a id="__codelineno-1-10" name="__codelineno-1-10" href="#__codelineno-1-10"></a>
</span><span id="__span-1-11"><a id="__codelineno-1-11" name="__codelineno-1-11" href="#__codelineno-1-11"></a><span class="c1"># Bypass cache pour URIs admin WordPress</span>
</span><span id="__span-1-12"><a id="__codelineno-1-12" name="__codelineno-1-12" href="#__codelineno-1-12"></a><span class="k">map</span><span class="w"> </span><span class="nv">$request_uri</span><span class="w"> </span><span class="nv">$skip_cache_uri</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-1-13"><a id="__codelineno-1-13" name="__codelineno-1-13" href="#__codelineno-1-13"></a><span class="w">    </span><span class="kn">default</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span>
</span><span id="__span-1-14"><a id="__codelineno-1-14" name="__codelineno-1-14" href="#__codelineno-1-14"></a><span class="w">    </span><span class="kn">~*wp-admin</span><span class="w">  </span><span class="mi">1</span><span class="p">;</span>
</span><span id="__span-1-15"><a id="__codelineno-1-15" name="__codelineno-1-15" href="#__codelineno-1-15"></a><span class="w">    </span><span class="kn">~*wp-login</span><span class="w">  </span><span class="mi">1</span><span class="p">;</span>
</span><span id="__span-1-16"><a id="__codelineno-1-16" name="__codelineno-1-16" href="#__codelineno-1-16"></a><span class="w">    </span><span class="kn">~*wp-cron</span><span class="w">   </span><span class="mi">1</span><span class="p">;</span>
</span><span id="__span-1-17"><a id="__codelineno-1-17" name="__codelineno-1-17" href="#__codelineno-1-17"></a><span class="w">    </span><span class="kn">~*xmlrpc</span><span class="w">    </span><span class="mi">1</span><span class="p">;</span>
</span><span id="__span-1-18"><a id="__codelineno-1-18" name="__codelineno-1-18" href="#__codelineno-1-18"></a><span class="p">}</span>
</span><span id="__span-1-19"><a id="__codelineno-1-19" name="__codelineno-1-19" href="#__codelineno-1-19"></a>
</span><span id="__span-1-20"><a id="__codelineno-1-20" name="__codelineno-1-20" href="#__codelineno-1-20"></a><span class="c1"># Bypass cache pour utilisateurs connectés</span>
</span><span id="__span-1-21"><a id="__codelineno-1-21" name="__codelineno-1-21" href="#__codelineno-1-21"></a><span class="k">map</span><span class="w"> </span><span class="nv">$http_cookie</span><span class="w"> </span><span class="nv">$skip_cache_cookie</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-1-22"><a id="__codelineno-1-22" name="__codelineno-1-22" href="#__codelineno-1-22"></a><span class="w">    </span><span class="kn">default</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span>
</span><span id="__span-1-23"><a id="__codelineno-1-23" name="__codelineno-1-23" href="#__codelineno-1-23"></a><span class="w">    </span><span class="kn">~*wordpress_logged_in</span><span class="w">  </span><span class="mi">1</span><span class="p">;</span>
</span><span id="__span-1-24"><a id="__codelineno-1-24" name="__codelineno-1-24" href="#__codelineno-1-24"></a><span class="w">    </span><span class="kn">~*comment_author</span><span class="w">       </span><span class="mi">1</span><span class="p">;</span>
</span><span id="__span-1-25"><a id="__codelineno-1-25" name="__codelineno-1-25" href="#__codelineno-1-25"></a><span class="w">    </span><span class="kn">~*wp-postpass</span><span class="w">          </span><span class="mi">1</span><span class="p">;</span>
</span><span id="__span-1-26"><a id="__codelineno-1-26" name="__codelineno-1-26" href="#__codelineno-1-26"></a><span class="p">}</span>
</span><span id="__span-1-27"><a id="__codelineno-1-27" name="__codelineno-1-27" href="#__codelineno-1-27"></a>
</span><span id="__span-1-28"><a id="__codelineno-1-28" name="__codelineno-1-28" href="#__codelineno-1-28"></a><span class="c1"># Combinaison finale</span>
</span><span id="__span-1-29"><a id="__codelineno-1-29" name="__codelineno-1-29" href="#__codelineno-1-29"></a><span class="k">map</span><span class="w"> </span><span class="nv">$skip_cache_method$skip_cache_uri$skip_cache_cookie</span><span class="w"> </span><span class="nv">$skip_cache</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-1-30"><a id="__codelineno-1-30" name="__codelineno-1-30" href="#__codelineno-1-30"></a><span class="w">    </span><span class="kn">default</span><span class="w"> </span><span class="mi">1</span><span class="p">;</span>
</span><span id="__span-1-31"><a id="__codelineno-1-31" name="__codelineno-1-31" href="#__codelineno-1-31"></a><span class="w">    </span><span class="kn">000</span><span class="w">     </span><span class="mi">0</span><span class="p">;</span>
</span><span id="__span-1-32"><a id="__codelineno-1-32" name="__codelineno-1-32" href="#__codelineno-1-32"></a><span class="p">}</span>
</span></code></pre></div>
<p><strong>Paramètres</strong> :
- <code>keys_zone=WORDPRESS:100m</code> : 100MB pour stocker les clés de cache (≈800k pages)
- <code>max_size=500m</code> : Taille maximale du cache sur disque (500MB)
- <code>inactive=60m</code> : Supprimer les entrées non accédées depuis 60 minutes
- <code>levels=1:2</code> : Structure de répertoires pour optimiser les accès disque</p>
<h3 id="2-inclusion-dans-nginxconf">2. Inclusion dans nginx.conf<a class="headerlink" href="#2-inclusion-dans-nginxconf" title="Permanent link">&para;</a></h3>
<p><strong>Fichier</strong> : <code>/etc/nginx/nginx.conf</code></p>
<p>Ajouté dans le bloc <code>http {}</code> (ligne 61) :</p>
<div class="language-nginx highlight"><pre><span></span><code><span id="__span-2-1"><a id="__codelineno-2-1" name="__codelineno-2-1" href="#__codelineno-2-1"></a><span class="c1"># WordPress cache configuration</span>
</span><span id="__span-2-2"><a id="__codelineno-2-2" name="__codelineno-2-2" href="#__codelineno-2-2"></a><span class="k">include</span><span class="w"> </span><span class="n">/etc/nginx/snippets/wordpress-cache.conf</span>;
</span></code></pre></div>
<h3 id="3-configuration-par-site">3. Configuration par site<a class="headerlink" href="#3-configuration-par-site" title="Permanent link">&para;</a></h3>
<h4 id="clemence">Clémence<a class="headerlink" href="#clemence" title="Permanent link">&para;</a></h4>
<p><strong>Fichier</strong> : <code>/etc/nginx/sites-available/clemence</code></p>
<div class="language-nginx highlight"><pre><span></span><code><span id="__span-3-1"><a id="__codelineno-3-1" name="__codelineno-3-1" href="#__codelineno-3-1"></a><span class="k">location</span><span class="w"> </span><span class="s">/</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-3-2"><a id="__codelineno-3-2" name="__codelineno-3-2" href="#__codelineno-3-2"></a><span class="w">    </span><span class="kn">proxy_pass</span><span class="w"> </span><span class="s">http://127.0.0.1:8890</span><span class="p">;</span>
</span><span id="__span-3-3"><a id="__codelineno-3-3" name="__codelineno-3-3" href="#__codelineno-3-3"></a>
</span><span id="__span-3-4"><a id="__codelineno-3-4" name="__codelineno-3-4" href="#__codelineno-3-4"></a><span class="w">    </span><span class="c1"># WordPress Proxy Cache</span>
</span><span id="__span-3-5"><a id="__codelineno-3-5" name="__codelineno-3-5" href="#__codelineno-3-5"></a><span class="w">    </span><span class="kn">proxy_cache</span><span class="w"> </span><span class="s">WORDPRESS</span><span class="p">;</span>
</span><span id="__span-3-6"><a id="__codelineno-3-6" name="__codelineno-3-6" href="#__codelineno-3-6"></a><span class="w">    </span><span class="kn">proxy_cache_bypass</span><span class="w"> </span><span class="nv">$skip_cache</span><span class="p">;</span>
</span><span id="__span-3-7"><a id="__codelineno-3-7" name="__codelineno-3-7" href="#__codelineno-3-7"></a><span class="w">    </span><span class="kn">proxy_no_cache</span><span class="w"> </span><span class="nv">$skip_cache</span><span class="p">;</span>
</span><span id="__span-3-8"><a id="__codelineno-3-8" name="__codelineno-3-8" href="#__codelineno-3-8"></a><span class="w">    </span><span class="kn">proxy_cache_valid</span><span class="w"> </span><span class="mi">200</span><span class="w"> </span><span class="mi">60m</span><span class="p">;</span>
</span><span id="__span-3-9"><a id="__codelineno-3-9" name="__codelineno-3-9" href="#__codelineno-3-9"></a><span class="w">    </span><span class="kn">proxy_cache_valid</span><span class="w"> </span><span class="mi">404</span><span class="w"> </span><span class="mi">10m</span><span class="p">;</span>
</span><span id="__span-3-10"><a id="__codelineno-3-10" name="__codelineno-3-10" href="#__codelineno-3-10"></a><span class="w">    </span><span class="kn">proxy_cache_use_stale</span><span class="w"> </span><span class="s">error</span><span class="w"> </span><span class="s">timeout</span><span class="w"> </span><span class="s">updating</span><span class="w"> </span><span class="s">http_500</span><span class="w"> </span><span class="s">http_502</span><span class="w"> </span><span class="s">http_503</span><span class="w"> </span><span class="s">http_504</span><span class="p">;</span>
</span><span id="__span-3-11"><a id="__codelineno-3-11" name="__codelineno-3-11" href="#__codelineno-3-11"></a><span class="w">    </span><span class="kn">proxy_cache_lock</span><span class="w"> </span><span class="no">on</span><span class="p">;</span>
</span><span id="__span-3-12"><a id="__codelineno-3-12" name="__codelineno-3-12" href="#__codelineno-3-12"></a><span class="w">    </span><span class="kn">add_header</span><span class="w"> </span><span class="s">X-Cache-Status</span><span class="w"> </span><span class="nv">$upstream_cache_status</span><span class="p">;</span>
</span><span id="__span-3-13"><a id="__codelineno-3-13" name="__codelineno-3-13" href="#__codelineno-3-13"></a>
</span><span id="__span-3-14"><a id="__codelineno-3-14" name="__codelineno-3-14" href="#__codelineno-3-14"></a><span class="w">    </span><span class="c1"># ... reste de la config proxy ...</span>
</span><span id="__span-3-15"><a id="__codelineno-3-15" name="__codelineno-3-15" href="#__codelineno-3-15"></a><span class="p">}</span>
</span></code></pre></div>
<h4 id="solidarlink">SolidarLink<a class="headerlink" href="#solidarlink" title="Permanent link">&para;</a></h4>
<p><strong>Fichier</strong> : <code>/etc/nginx/sites-available/solidarlink</code></p>
<p>Configuration identique à clemence (directives <code>proxy_cache*</code> ajoutées).</p>
<hr />
<h2 id="directives-importantes">Directives importantes<a class="headerlink" href="#directives-importantes" title="Permanent link">&para;</a></h2>
<h3 id="proxy_cache-wordpress">proxy_cache WORDPRESS<a class="headerlink" href="#proxy_cache-wordpress" title="Permanent link">&para;</a></h3>
<p>Active le cache en utilisant la zone "WORDPRESS" définie dans wordpress-cache.conf.</p>
<h3 id="proxy_cache_bypass-skip_cache">proxy_cache_bypass $skip_cache<a class="headerlink" href="#proxy_cache_bypass-skip_cache" title="Permanent link">&para;</a></h3>
<p>Ne <strong>pas lire</strong> depuis le cache si <code>$skip_cache</code> vaut 1 (admin, POST, logged in).</p>
<h3 id="proxy_no_cache-skip_cache">proxy_no_cache $skip_cache<a class="headerlink" href="#proxy_no_cache-skip_cache" title="Permanent link">&para;</a></h3>
<p>Ne <strong>pas écrire</strong> dans le cache si <code>$skip_cache</code> vaut 1.</p>
<h3 id="proxy_cache_valid">proxy_cache_valid<a class="headerlink" href="#proxy_cache_valid" title="Permanent link">&para;</a></h3>
<ul>
<li><code>proxy_cache_valid 200 60m</code> : Cache les réponses 200 OK pendant 60 minutes</li>
<li><code>proxy_cache_valid 404 10m</code> : Cache les 404 pendant 10 minutes seulement</li>
</ul>
<h3 id="proxy_cache_use_stale">proxy_cache_use_stale<a class="headerlink" href="#proxy_cache_use_stale" title="Permanent link">&para;</a></h3>
<p>En cas d'erreur du backend (502, 503, timeout), servir une version <strong>stale</strong> (périmée) du cache plutôt qu'une erreur. Très important pour la disponibilité !</p>
<h3 id="proxy_cache_lock">proxy_cache_lock<a class="headerlink" href="#proxy_cache_lock" title="Permanent link">&para;</a></h3>
<p>Si plusieurs requêtes demandent la même ressource absente du cache, <strong>une seule</strong> va au backend, les autres attendent. Évite le "cache stampede".</p>
<h3 id="add_header-x-cache-status">add_header X-Cache-Status<a class="headerlink" href="#add_header-x-cache-status" title="Permanent link">&para;</a></h3>
<p>Ajoute un header HTTP indiquant le statut du cache :
- <code>MISS</code> : Pas en cache, récupéré depuis le backend
- <code>HIT</code> : Servi depuis le cache
- <code>BYPASS</code> : Cache ignoré (admin, POST, logged in)
- <code>STALE</code> : Version périmée servie suite à erreur backend
- <code>UPDATING</code> : Mise à jour en cours, version stale servie temporairement
- <code>REVALIDATED</code> : Cache validé avec backend (304 Not Modified)</p>
<hr />
<h2 id="quand-le-cache-est-il-utilise">Quand le cache est-il utilisé ?<a class="headerlink" href="#quand-le-cache-est-il-utilise" title="Permanent link">&para;</a></h2>
<h3 id="pages-mises-en-cache">✅ Pages mises en cache<a class="headerlink" href="#pages-mises-en-cache" title="Permanent link">&para;</a></h3>
<ul>
<li>Pages publiques (homepage, articles, pages statiques)</li>
<li>Archives (catégories, tags, dates)</li>
<li>Flux RSS</li>
<li>Réponses JSON API publiques</li>
</ul>
<p><strong>Conditions</strong> :
- Méthode HTTP : <code>GET</code> ou <code>HEAD</code>
- Pas de cookie <code>wordpress_logged_in</code>
- Pas d'URL contenant <code>wp-admin</code>, <code>wp-login</code>, <code>wp-cron</code></p>
<h3 id="pages-non-mises-en-cache">❌ Pages NON mises en cache<a class="headerlink" href="#pages-non-mises-en-cache" title="Permanent link">&para;</a></h3>
<ul>
<li>Toutes les requêtes <code>POST</code> (formulaires, commentaires)</li>
<li>URLs contenant <code>wp-admin</code>, <code>wp-login.php</code>, <code>wp-cron.php</code>, <code>xmlrpc.php</code></li>
<li>Utilisateurs connectés (cookie <code>wordpress_logged_in</code> présent)</li>
<li>Auteurs de commentaires (cookie <code>comment_author</code>)</li>
<li>Pages protégées par mot de passe (<code>wp-postpass</code> cookie)</li>
</ul>
<hr />
<h2 id="verification-et-monitoring">Vérification et monitoring<a class="headerlink" href="#verification-et-monitoring" title="Permanent link">&para;</a></h2>
<h3 id="verifier-que-le-cache-fonctionne">Vérifier que le cache fonctionne<a class="headerlink" href="#verifier-que-le-cache-fonctionne" title="Permanent link">&para;</a></h3>
<div class="language-bash highlight"><pre><span></span><code><span id="__span-4-1"><a id="__codelineno-4-1" name="__codelineno-4-1" href="#__codelineno-4-1"></a><span class="c1"># Depuis le serveur</span>
</span><span id="__span-4-2"><a id="__codelineno-4-2" name="__codelineno-4-2" href="#__codelineno-4-2"></a>curl<span class="w"> </span>-I<span class="w"> </span>https://clemence.srv759970.hstgr.cloud/<span class="w"> </span>-k<span class="w"> </span><span class="p">|</span><span class="w"> </span>grep<span class="w"> </span>X-Cache-Status
</span><span id="__span-4-3"><a id="__codelineno-4-3" name="__codelineno-4-3" href="#__codelineno-4-3"></a><span class="c1"># Devrait afficher : X-Cache-Status: MISS (première requête)</span>
</span><span id="__span-4-4"><a id="__codelineno-4-4" name="__codelineno-4-4" href="#__codelineno-4-4"></a>
</span><span id="__span-4-5"><a id="__codelineno-4-5" name="__codelineno-4-5" href="#__codelineno-4-5"></a><span class="c1"># Deuxième requête</span>
</span><span id="__span-4-6"><a id="__codelineno-4-6" name="__codelineno-4-6" href="#__codelineno-4-6"></a>curl<span class="w"> </span>-I<span class="w"> </span>https://clemence.srv759970.hstgr.cloud/<span class="w"> </span>-k<span class="w"> </span><span class="p">|</span><span class="w"> </span>grep<span class="w"> </span>X-Cache-Status
</span><span id="__span-4-7"><a id="__codelineno-4-7" name="__codelineno-4-7" href="#__codelineno-4-7"></a><span class="c1"># Devrait afficher : X-Cache-Status: HIT (deuxième requête)</span>
</span></code></pre></div>
<p><strong>Note</strong> : Basic Auth requis pour clemence, utiliser <code>-u user:password</code>.</p>
<h3 id="statistiques-du-cache">Statistiques du cache<a class="headerlink" href="#statistiques-du-cache" title="Permanent link">&para;</a></h3>
<div class="language-bash highlight"><pre><span></span><code><span id="__span-5-1"><a id="__codelineno-5-1" name="__codelineno-5-1" href="#__codelineno-5-1"></a><span class="c1"># Taille actuelle du cache</span>
</span><span id="__span-5-2"><a id="__codelineno-5-2" name="__codelineno-5-2" href="#__codelineno-5-2"></a>du<span class="w"> </span>-sh<span class="w"> </span>/var/cache/nginx/wordpress/
</span><span id="__span-5-3"><a id="__codelineno-5-3" name="__codelineno-5-3" href="#__codelineno-5-3"></a>
</span><span id="__span-5-4"><a id="__codelineno-5-4" name="__codelineno-5-4" href="#__codelineno-5-4"></a><span class="c1"># Nombre de fichiers en cache</span>
</span><span id="__span-5-5"><a id="__codelineno-5-5" name="__codelineno-5-5" href="#__codelineno-5-5"></a>find<span class="w"> </span>/var/cache/nginx/wordpress/<span class="w"> </span>-type<span class="w"> </span>f<span class="w"> </span><span class="p">|</span><span class="w"> </span>wc<span class="w"> </span>-l
</span><span id="__span-5-6"><a id="__codelineno-5-6" name="__codelineno-5-6" href="#__codelineno-5-6"></a>
</span><span id="__span-5-7"><a id="__codelineno-5-7" name="__codelineno-5-7" href="#__codelineno-5-7"></a><span class="c1"># Fichiers les plus récents (dernières entrées)</span>
</span><span id="__span-5-8"><a id="__codelineno-5-8" name="__codelineno-5-8" href="#__codelineno-5-8"></a>find<span class="w"> </span>/var/cache/nginx/wordpress/<span class="w"> </span>-type<span class="w"> </span>f<span class="w"> </span>-mmin<span class="w"> </span>-10
</span></code></pre></div>
<h3 id="logs">Logs<a class="headerlink" href="#logs" title="Permanent link">&para;</a></h3>
<p>Les logs Nginx access montrent les requêtes :</p>
<div class="language-bash highlight"><pre><span></span><code><span id="__span-6-1"><a id="__codelineno-6-1" name="__codelineno-6-1" href="#__codelineno-6-1"></a><span class="c1"># Voir les requêtes avec statut cache</span>
</span><span id="__span-6-2"><a id="__codelineno-6-2" name="__codelineno-6-2" href="#__codelineno-6-2"></a>tail<span class="w"> </span>-f<span class="w"> </span>/var/log/nginx/clemence-access.log
</span><span id="__span-6-3"><a id="__codelineno-6-3" name="__codelineno-6-3" href="#__codelineno-6-3"></a>tail<span class="w"> </span>-f<span class="w"> </span>/var/log/nginx/solidarlink-access.log
</span></code></pre></div>
<p>L'en-tête <code>X-Cache-Status</code> est visible dans les logs si configuré dans le format de log (actuellement format par défaut, ne le montre pas).</p>
<hr />
<h2 id="gestion-du-cache">Gestion du cache<a class="headerlink" href="#gestion-du-cache" title="Permanent link">&para;</a></h2>
<h3 id="purger-tout-le-cache">Purger tout le cache<a class="headerlink" href="#purger-tout-le-cache" title="Permanent link">&para;</a></h3>
<div class="language-bash highlight"><pre><span></span><code><span id="__span-7-1"><a id="__codelineno-7-1" name="__codelineno-7-1" href="#__codelineno-7-1"></a><span class="c1"># Supprimer tous les fichiers de cache</span>
</span><span id="__span-7-2"><a id="__codelineno-7-2" name="__codelineno-7-2" href="#__codelineno-7-2"></a>sudo<span class="w"> </span>rm<span class="w"> </span>-rf<span class="w"> </span>/var/cache/nginx/wordpress/*
</span><span id="__span-7-3"><a id="__codelineno-7-3" name="__codelineno-7-3" href="#__codelineno-7-3"></a>
</span><span id="__span-7-4"><a id="__codelineno-7-4" name="__codelineno-7-4" href="#__codelineno-7-4"></a><span class="c1"># Ou recréer le répertoire avec bonnes permissions</span>
</span><span id="__span-7-5"><a id="__codelineno-7-5" name="__codelineno-7-5" href="#__codelineno-7-5"></a>sudo<span class="w"> </span>rm<span class="w"> </span>-rf<span class="w"> </span>/var/cache/nginx/wordpress
</span><span id="__span-7-6"><a id="__codelineno-7-6" name="__codelineno-7-6" href="#__codelineno-7-6"></a>sudo<span class="w"> </span>mkdir<span class="w"> </span>-p<span class="w"> </span>/var/cache/nginx/wordpress
</span><span id="__span-7-7"><a id="__codelineno-7-7" name="__codelineno-7-7" href="#__codelineno-7-7"></a>sudo<span class="w"> </span>chown<span class="w"> </span>www-data:www-data<span class="w"> </span>/var/cache/nginx/wordpress
</span></code></pre></div>
<h3 id="purger-le-cache-dun-site-specifique">Purger le cache d'un site spécifique<a class="headerlink" href="#purger-le-cache-dun-site-specifique" title="Permanent link">&para;</a></h3>
<p>Le cache utilise une clé basée sur <code>$scheme$request_method$host$request_uri</code>, donc les deux sites ont des clés différentes. Cependant, ils partagent le même répertoire <code>/var/cache/nginx/wordpress/</code>.</p>
<p><strong>Solution manuelle</strong> : Supprimer tout et laisser se reconstruire (WordPress met à jour rarement).</p>
<p><strong>Solution avancée</strong> : Utiliser un plugin WordPress comme "Nginx Helper" qui envoie des purges au cache via des requêtes PURGE HTTP (nécessite configuration supplémentaire).</p>
<h3 id="recharger-la-configuration">Recharger la configuration<a class="headerlink" href="#recharger-la-configuration" title="Permanent link">&para;</a></h3>
<p>Après modification des fichiers de configuration :</p>
<div class="language-bash highlight"><pre><span></span><code><span id="__span-8-1"><a id="__codelineno-8-1" name="__codelineno-8-1" href="#__codelineno-8-1"></a><span class="c1"># Tester la syntaxe</span>
</span><span id="__span-8-2"><a id="__codelineno-8-2" name="__codelineno-8-2" href="#__codelineno-8-2"></a>sudo<span class="w"> </span>nginx<span class="w"> </span>-t
</span><span id="__span-8-3"><a id="__codelineno-8-3" name="__codelineno-8-3" href="#__codelineno-8-3"></a>
</span><span id="__span-8-4"><a id="__codelineno-8-4" name="__codelineno-8-4" href="#__codelineno-8-4"></a><span class="c1"># Recharger (sans downtime)</span>
</span><span id="__span-8-5"><a id="__codelineno-8-5" name="__codelineno-8-5" href="#__codelineno-8-5"></a>sudo<span class="w"> </span>systemctl<span class="w"> </span>reload<span class="w"> </span>nginx
</span><span id="__span-8-6"><a id="__codelineno-8-6" name="__codelineno-8-6" href="#__codelineno-8-6"></a>
</span><span id="__span-8-7"><a id="__codelineno-8-7" name="__codelineno-8-7" href="#__codelineno-8-7"></a><span class="c1"># Redémarrer (si problème)</span>
</span><span id="__span-8-8"><a id="__codelineno-8-8" name="__codelineno-8-8" href="#__codelineno-8-8"></a>sudo<span class="w"> </span>systemctl<span class="w"> </span>restart<span class="w"> </span>nginx
</span></code></pre></div>
<hr />
<h2 id="tuning-et-optimisation">Tuning et optimisation<a class="headerlink" href="#tuning-et-optimisation" title="Permanent link">&para;</a></h2>
<h3 id="augmenter-la-taille-du-cache">Augmenter la taille du cache<a class="headerlink" href="#augmenter-la-taille-du-cache" title="Permanent link">&para;</a></h3>
<p>Si 500MB ne suffit pas :</p>
<div class="language-nginx highlight"><pre><span></span><code><span id="__span-9-1"><a id="__codelineno-9-1" name="__codelineno-9-1" href="#__codelineno-9-1"></a><span class="c1"># Dans /etc/nginx/snippets/wordpress-cache.conf</span>
</span><span id="__span-9-2"><a id="__codelineno-9-2" name="__codelineno-9-2" href="#__codelineno-9-2"></a><span class="k">proxy_cache_path</span><span class="w"> </span><span class="s">/var/cache/nginx/wordpress</span><span class="w"> </span><span class="s">levels=1:2</span><span class="w"> </span><span class="s">keys_zone=WORDPRESS:200m</span><span class="w"> </span><span class="s">max_size=2g</span><span class="w"> </span><span class="s">inactive=120m</span><span class="w"> </span><span class="s">use_temp_path=off</span><span class="p">;</span>
</span></code></pre></div>
<ul>
<li><code>keys_zone=200m</code> : 200MB de clés (≈1.6M pages)</li>
<li><code>max_size=2g</code> : 2GB de cache disque</li>
<li><code>inactive=120m</code> : Garder les entrées 2 heures</li>
</ul>
<p><strong>Puis</strong> :</p>
<div class="language-bash highlight"><pre><span></span><code><span id="__span-10-1"><a id="__codelineno-10-1" name="__codelineno-10-1" href="#__codelineno-10-1"></a>sudo<span class="w"> </span>systemctl<span class="w"> </span>reload<span class="w"> </span>nginx
</span></code></pre></div>
<h3 id="ajuster-la-duree-de-cache">Ajuster la durée de cache<a class="headerlink" href="#ajuster-la-duree-de-cache" title="Permanent link">&para;</a></h3>
<p>Pour cacher plus longtemps les pages :</p>
<div class="language-nginx highlight"><pre><span></span><code><span id="__span-11-1"><a id="__codelineno-11-1" name="__codelineno-11-1" href="#__codelineno-11-1"></a><span class="c1"># Dans les vhosts clemence et solidarlink</span>
</span><span id="__span-11-2"><a id="__codelineno-11-2" name="__codelineno-11-2" href="#__codelineno-11-2"></a><span class="k">proxy_cache_valid</span><span class="w"> </span><span class="mi">200</span><span class="w"> </span><span class="mi">120m</span><span class="p">;</span><span class="w">  </span><span class="c1"># 2 heures au lieu de 60min</span>
</span><span id="__span-11-3"><a id="__codelineno-11-3" name="__codelineno-11-3" href="#__codelineno-11-3"></a><span class="k">proxy_cache_valid</span><span class="w"> </span><span class="mi">404</span><span class="w"> </span><span class="mi">30m</span><span class="p">;</span><span class="w">   </span><span class="c1"># 30min pour 404</span>
</span></code></pre></div>
<h3 id="exclure-des-uris-supplementaires">Exclure des URIs supplémentaires<a class="headerlink" href="#exclure-des-uris-supplementaires" title="Permanent link">&para;</a></h3>
<p>Si certaines pages dynamiques sont mises en cache par erreur :</p>
<div class="language-nginx highlight"><pre><span></span><code><span id="__span-12-1"><a id="__codelineno-12-1" name="__codelineno-12-1" href="#__codelineno-12-1"></a><span class="c1"># Dans /etc/nginx/snippets/wordpress-cache.conf</span>
</span><span id="__span-12-2"><a id="__codelineno-12-2" name="__codelineno-12-2" href="#__codelineno-12-2"></a><span class="k">map</span><span class="w"> </span><span class="nv">$request_uri</span><span class="w"> </span><span class="nv">$skip_cache_uri</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-12-3"><a id="__codelineno-12-3" name="__codelineno-12-3" href="#__codelineno-12-3"></a><span class="w">    </span><span class="kn">default</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span>
</span><span id="__span-12-4"><a id="__codelineno-12-4" name="__codelineno-12-4" href="#__codelineno-12-4"></a><span class="w">    </span><span class="kn">~*wp-admin</span><span class="w">  </span><span class="mi">1</span><span class="p">;</span>
</span><span id="__span-12-5"><a id="__codelineno-12-5" name="__codelineno-12-5" href="#__codelineno-12-5"></a><span class="w">    </span><span class="kn">~*wp-login</span><span class="w">  </span><span class="mi">1</span><span class="p">;</span>
</span><span id="__span-12-6"><a id="__codelineno-12-6" name="__codelineno-12-6" href="#__codelineno-12-6"></a><span class="w">    </span><span class="kn">~*wp-cron</span><span class="w">   </span><span class="mi">1</span><span class="p">;</span>
</span><span id="__span-12-7"><a id="__codelineno-12-7" name="__codelineno-12-7" href="#__codelineno-12-7"></a><span class="w">    </span><span class="kn">~*xmlrpc</span><span class="w">    </span><span class="mi">1</span><span class="p">;</span>
</span><span id="__span-12-8"><a id="__codelineno-12-8" name="__codelineno-12-8" href="#__codelineno-12-8"></a><span class="w">    </span><span class="kn">~*/cart</span><span class="w">     </span><span class="mi">1</span><span class="p">;</span><span class="w">  </span><span class="c1"># Panier WooCommerce</span>
</span><span id="__span-12-9"><a id="__codelineno-12-9" name="__codelineno-12-9" href="#__codelineno-12-9"></a><span class="w">    </span><span class="kn">~*/checkout</span><span class="w"> </span><span class="mi">1</span><span class="p">;</span><span class="w">  </span><span class="c1"># Page de paiement</span>
</span><span id="__span-12-10"><a id="__codelineno-12-10" name="__codelineno-12-10" href="#__codelineno-12-10"></a><span class="w">    </span><span class="kn">~*/my-account</span><span class="w"> </span><span class="mi">1</span><span class="p">;</span><span class="w"> </span><span class="c1"># Compte utilisateur</span>
</span><span id="__span-12-11"><a id="__codelineno-12-11" name="__codelineno-12-11" href="#__codelineno-12-11"></a><span class="p">}</span>
</span></code></pre></div>
<h3 id="cache-conditionnel-par-query-string">Cache conditionnel par query string<a class="headerlink" href="#cache-conditionnel-par-query-string" title="Permanent link">&para;</a></h3>
<p>Actuellement, toute query string crée une clé de cache unique. Pour ignorer certains paramètres :</p>
<div class="language-nginx highlight"><pre><span></span><code><span id="__span-13-1"><a id="__codelineno-13-1" name="__codelineno-13-1" href="#__codelineno-13-1"></a><span class="c1"># Clé de cache sans query string inutiles</span>
</span><span id="__span-13-2"><a id="__codelineno-13-2" name="__codelineno-13-2" href="#__codelineno-13-2"></a><span class="k">proxy_cache_key</span><span class="w"> </span><span class="s">&quot;</span><span class="nv">$scheme$request_method$host$uri$is_args$filtered_args&quot;</span><span class="p">;</span>
</span></code></pre></div>
<p>(Nécessite configuration avancée avec <code>map</code> pour filtrer les args).</p>
<hr />
<h2 id="troubleshooting">Troubleshooting<a class="headerlink" href="#troubleshooting" title="Permanent link">&para;</a></h2>
<h3 id="cache-ne-semble-pas-fonctionner">Cache ne semble pas fonctionner<a class="headerlink" href="#cache-ne-semble-pas-fonctionner" title="Permanent link">&para;</a></h3>
<p><strong>Vérifications</strong> :</p>
<ol>
<li><strong>Header X-Cache-Status présent ?</strong>
   <div class="language-bash highlight"><pre><span></span><code><span id="__span-14-1"><a id="__codelineno-14-1" name="__codelineno-14-1" href="#__codelineno-14-1"></a>curl<span class="w"> </span>-I<span class="w"> </span>https://clemence.srv759970.hstgr.cloud/<span class="w"> </span>-k<span class="w"> </span><span class="p">|</span><span class="w"> </span>grep<span class="w"> </span>X-Cache
</span></code></pre></div></li>
</ol>
<p>Si absent → Configuration proxy_cache non appliquée, vérifier vhost et reload nginx.</p>
<ol>
<li><strong>Toujours MISS ou BYPASS ?</strong></li>
<li>MISS : Normal première requête, deuxième devrait être HIT</li>
<li>
<p>BYPASS : Vérifier que vous n'êtes pas logué (cookies), pas de POST, pas d'URL admin</p>
</li>
<li>
<p><strong>Répertoire cache vide ?</strong>
   <div class="language-bash highlight"><pre><span></span><code><span id="__span-15-1"><a id="__codelineno-15-1" name="__codelineno-15-1" href="#__codelineno-15-1"></a>ls<span class="w"> </span>/var/cache/nginx/wordpress/
</span></code></pre></div></p>
</li>
</ol>
<p>Si vide → Vérifier permissions (doit être <code>www-data:www-data</code>).</p>
<ol>
<li><strong>Erreurs dans logs Nginx ?</strong>
   <div class="language-bash highlight"><pre><span></span><code><span id="__span-16-1"><a id="__codelineno-16-1" name="__codelineno-16-1" href="#__codelineno-16-1"></a>tail<span class="w"> </span>-50<span class="w"> </span>/var/log/nginx/error.log<span class="w"> </span><span class="p">|</span><span class="w"> </span>grep<span class="w"> </span>cache
</span></code></pre></div></li>
</ol>
<h3 id="reponses-stale-servies-trop-souvent">Réponses stale servies trop souvent<a class="headerlink" href="#reponses-stale-servies-trop-souvent" title="Permanent link">&para;</a></h3>
<p>Si <code>X-Cache-Status: STALE</code> apparaît fréquemment, le backend a des problèmes. Vérifier :</p>
<div class="language-bash highlight"><pre><span></span><code><span id="__span-17-1"><a id="__codelineno-17-1" name="__codelineno-17-1" href="#__codelineno-17-1"></a><span class="c1"># Logs containers WordPress</span>
</span><span id="__span-17-2"><a id="__codelineno-17-2" name="__codelineno-17-2" href="#__codelineno-17-2"></a>docker<span class="w"> </span>logs<span class="w"> </span>-f<span class="w"> </span>wordpress-clemence
</span><span id="__span-17-3"><a id="__codelineno-17-3" name="__codelineno-17-3" href="#__codelineno-17-3"></a>docker<span class="w"> </span>logs<span class="w"> </span>-f<span class="w"> </span>wordpress-solidarlink
</span><span id="__span-17-4"><a id="__codelineno-17-4" name="__codelineno-17-4" href="#__codelineno-17-4"></a>
</span><span id="__span-17-5"><a id="__codelineno-17-5" name="__codelineno-17-5" href="#__codelineno-17-5"></a><span class="c1"># Logs auto-start</span>
</span><span id="__span-17-6"><a id="__codelineno-17-6" name="__codelineno-17-6" href="#__codelineno-17-6"></a>journalctl<span class="w"> </span>-u<span class="w"> </span>docker-autostart<span class="w"> </span>-f
</span></code></pre></div>
<h3 id="espace-disque-plein">Espace disque plein<a class="headerlink" href="#espace-disque-plein" title="Permanent link">&para;</a></h3>
<p>Le cache est limité à 500MB (<code>max_size=500m</code>), mais si le disque se remplit :</p>
<div class="language-bash highlight"><pre><span></span><code><span id="__span-18-1"><a id="__codelineno-18-1" name="__codelineno-18-1" href="#__codelineno-18-1"></a><span class="c1"># Vérifier espace disque</span>
</span><span id="__span-18-2"><a id="__codelineno-18-2" name="__codelineno-18-2" href="#__codelineno-18-2"></a>df<span class="w"> </span>-h<span class="w"> </span>/var/cache
</span><span id="__span-18-3"><a id="__codelineno-18-3" name="__codelineno-18-3" href="#__codelineno-18-3"></a>
</span><span id="__span-18-4"><a id="__codelineno-18-4" name="__codelineno-18-4" href="#__codelineno-18-4"></a><span class="c1"># Purger manuellement</span>
</span><span id="__span-18-5"><a id="__codelineno-18-5" name="__codelineno-18-5" href="#__codelineno-18-5"></a>sudo<span class="w"> </span>rm<span class="w"> </span>-rf<span class="w"> </span>/var/cache/nginx/wordpress/*
</span></code></pre></div>
<h3 id="cache-invalide-apres-mise-a-jour-wordpress">Cache invalide après mise à jour WordPress<a class="headerlink" href="#cache-invalide-apres-mise-a-jour-wordpress" title="Permanent link">&para;</a></h3>
<p>Après mise à jour de contenu WordPress, le cache peut servir des anciennes versions.</p>
<p><strong>Solution 1 : Attendre expiration</strong> (60min par défaut)</p>
<p><strong>Solution 2 : Purge manuelle</strong>
<div class="language-bash highlight"><pre><span></span><code><span id="__span-19-1"><a id="__codelineno-19-1" name="__codelineno-19-1" href="#__codelineno-19-1"></a>sudo<span class="w"> </span>rm<span class="w"> </span>-rf<span class="w"> </span>/var/cache/nginx/wordpress/*
</span></code></pre></div></p>
<p><strong>Solution 3 : Plugin WordPress</strong> (Nginx Helper) pour purge automatique lors de publications.</p>
<hr />
<h2 id="performance-attendue">Performance attendue<a class="headerlink" href="#performance-attendue" title="Permanent link">&para;</a></h2>
<h3 id="avant-cache-proxy-direct">Avant cache (proxy direct)<a class="headerlink" href="#avant-cache-proxy-direct" title="Permanent link">&para;</a></h3>
<ul>
<li><strong>Première requête</strong> : 500-1000ms (démarrage container via auto-start)</li>
<li><strong>Requêtes suivantes</strong> : 200-400ms (container chaud)</li>
<li><strong>RAM container</strong> : 150-300MB</li>
</ul>
<h3 id="apres-cache">Après cache<a class="headerlink" href="#apres-cache" title="Permanent link">&para;</a></h3>
<ul>
<li><strong>Première requête (MISS)</strong> : Identique (500-1000ms)</li>
<li><strong>Requêtes suivantes (HIT)</strong> : <strong>50-100ms</strong> (depuis Nginx cache)</li>
<li><strong>RAM économisée</strong> : Container peut s'arrêter plus vite (auto-start idle)</li>
</ul>
<p><strong>Gain net</strong> : 5-10x plus rapide pour pages en cache, réduction significative de la charge backend.</p>
<hr />
<h2 id="securite">Sécurité<a class="headerlink" href="#securite" title="Permanent link">&para;</a></h2>
<h3 id="considerations">Considérations<a class="headerlink" href="#considerations" title="Permanent link">&para;</a></h3>
<ol>
<li>
<p><strong>Pas de cache pour contenu sensible</strong> : Les règles <code>$skip_cache</code> excluent déjà les zones admin et utilisateurs connectés.</p>
</li>
<li>
<p><strong>Cache partagé</strong> : Les deux sites (clemence + solidarlink) utilisent la même zone de cache, mais les clés incluent <code>$host</code>, donc pas de collision.</p>
</li>
<li>
<p><strong>Headers de sécurité préservés</strong> : Le cache transmet les headers SSL/TLS et Security headers du backend.</p>
</li>
<li>
<p><strong>Basic Auth avant cache</strong> : Le basic auth Nginx s'applique <strong>avant</strong> le cache, donc pas de bypass possible.</p>
</li>
</ol>
<h3 id="risques-potentiels">Risques potentiels<a class="headerlink" href="#risques-potentiels" title="Permanent link">&para;</a></h3>
<ul>
<li>❌ <strong>Cache poisoning</strong> : Si un attaquant injecte des headers malicieux, ils peuvent être cachés. Risque faible avec configuration actuelle.</li>
<li>❌ <strong>Données personnelles</strong> : Vérifier que les pages cachées ne contiennent pas de données spécifiques utilisateur.</li>
<li>❌ <strong>Stale content</strong> : Pages périmées servies en cas d'erreur backend (voulu pour disponibilité).</li>
</ul>
<hr />
<h2 id="compatibilite">Compatibilité<a class="headerlink" href="#compatibilite" title="Permanent link">&para;</a></h2>
<h3 id="plugins-wordpress">Plugins WordPress<a class="headerlink" href="#plugins-wordpress" title="Permanent link">&para;</a></h3>
<p><strong>Compatible</strong> :
- ✅ Yoast SEO
- ✅ WooCommerce (avec exclusions <code>/cart</code>, <code>/checkout</code> si ajoutées)
- ✅ Contact Form 7
- ✅ Elementor (pages statiques)</p>
<p><strong>Peut nécessiter ajustements</strong> :
- ⚠️ Plugins de cache WordPress (W3 Total Cache, WP Super Cache) : Désactiver ou coordonner
- ⚠️ Plugins e-commerce : Exclure panier, checkout, account pages
- ⚠️ Plugins de personnalisation dynamique : Peuvent être affectés</p>
<p><strong>Recommandation</strong> : Désactiver les plugins de cache WordPress (inutiles avec cache Nginx).</p>
<h3 id="auto-start-system">Auto-Start System<a class="headerlink" href="#auto-start-system" title="Permanent link">&para;</a></h3>
<p>Le cache Nginx fonctionne <strong>en amont</strong> de l'auto-start, donc :</p>
<ul>
<li>✅ Les requêtes HIT ne déclenchent PAS le démarrage des containers</li>
<li>✅ Les containers peuvent rester arrêtés plus longtemps (économie RAM)</li>
<li>✅ Les requêtes MISS déclenchent l'auto-start normalement</li>
</ul>
<p><strong>Synergie parfaite</strong> : Cache réduit le nombre de démarrages containers, auto-start réduit l'utilisation RAM totale.</p>
<hr />
<h2 id="metriques-de-succes">Métriques de succès<a class="headerlink" href="#metriques-de-succes" title="Permanent link">&para;</a></h2>
<h3 id="phase-de-test-1-semaine">Phase de test (1 semaine)<a class="headerlink" href="#phase-de-test-1-semaine" title="Permanent link">&para;</a></h3>
<ul class="task-list">
<li class="task-list-item"><label class="task-list-control"><input type="checkbox" disabled/><span class="task-list-indicator"></span></label> X-Cache-Status HIT visible dans headers</li>
<li class="task-list-item"><label class="task-list-control"><input type="checkbox" disabled/><span class="task-list-indicator"></span></label> Temps de réponse moyen &lt; 100ms pour pages en cache</li>
<li class="task-list-item"><label class="task-list-control"><input type="checkbox" disabled/><span class="task-list-indicator"></span></label> Taux de HIT &gt; 70% sur trafic total</li>
<li class="task-list-item"><label class="task-list-control"><input type="checkbox" disabled/><span class="task-list-indicator"></span></label> Aucune plainte utilisateurs (pages périmées, erreurs)</li>
<li class="task-list-item"><label class="task-list-control"><input type="checkbox" disabled/><span class="task-list-indicator"></span></label> Taille cache &lt; 500MB (limite non atteinte)</li>
</ul>
<h3 id="production-1-mois">Production (1 mois)<a class="headerlink" href="#production-1-mois" title="Permanent link">&para;</a></h3>
<ul class="task-list">
<li class="task-list-item"><label class="task-list-control"><input type="checkbox" disabled/><span class="task-list-indicator"></span></label> Réduction 50% temps de démarrage containers (moins sollicités)</li>
<li class="task-list-item"><label class="task-list-control"><input type="checkbox" disabled/><span class="task-list-indicator"></span></label> Réduction 30% RAM moyenne utilisée (containers idle plus souvent)</li>
<li class="task-list-item"><label class="task-list-control"><input type="checkbox" disabled/><span class="task-list-indicator"></span></label> Temps de réponse moyen global &lt; 200ms</li>
<li class="task-list-item"><label class="task-list-control"><input type="checkbox" disabled/><span class="task-list-indicator"></span></label> Zéro erreur de cache (stale content acceptable uniquement en erreur)</li>
</ul>
<hr />
<h2 id="references">Références<a class="headerlink" href="#references" title="Permanent link">&para;</a></h2>
<ul>
<li><strong>Nginx Proxy Cache</strong> : https://nginx.org/en/docs/http/ngx_http_proxy_module.html#proxy_cache</li>
<li><strong>WordPress Nginx</strong> : https://www.nginx.com/resources/wiki/start/topics/recipes/wordpress/</li>
<li><strong>Cache Key Optimization</strong> : https://www.nginx.com/blog/nginx-caching-guide/</li>
</ul>
<hr />
<h2 id="nginx-helper-plugin-purge-automatique">Nginx Helper Plugin - Purge automatique<a class="headerlink" href="#nginx-helper-plugin-purge-automatique" title="Permanent link">&para;</a></h2>
<h3 id="installation-et-configuration">Installation et configuration<a class="headerlink" href="#installation-et-configuration" title="Permanent link">&para;</a></h3>
<p>Le plugin <strong>Nginx Helper</strong> est installé sur le site Clemence pour purger automatiquement le cache lors des mises à jour de contenu WordPress.</p>
<p><strong>Plugin</strong> : https://wordpress.org/plugins/nginx-helper/</p>
<p><strong>Configuration active</strong> :
<div class="language-php highlight"><pre><span></span><code><span id="__span-20-1"><a id="__codelineno-20-1" name="__codelineno-20-1" href="#__codelineno-20-1"></a><span class="x">// Options du plugin</span>
</span><span id="__span-20-2"><a id="__codelineno-20-2" name="__codelineno-20-2" href="#__codelineno-20-2"></a><span class="x">enable_purge: true</span>
</span><span id="__span-20-3"><a id="__codelineno-20-3" name="__codelineno-20-3" href="#__codelineno-20-3"></a><span class="x">cache_method: enable_fastcgi (compatible proxy_cache)</span>
</span><span id="__span-20-4"><a id="__codelineno-20-4" name="__codelineno-20-4" href="#__codelineno-20-4"></a><span class="x">purge_method: get_request</span>
</span><span id="__span-20-5"><a id="__codelineno-20-5" name="__codelineno-20-5" href="#__codelineno-20-5"></a>
</span><span id="__span-20-6"><a id="__codelineno-20-6" name="__codelineno-20-6" href="#__codelineno-20-6"></a><span class="x">// Hooks de purge automatique activés:</span>
</span><span id="__span-20-7"><a id="__codelineno-20-7" name="__codelineno-20-7" href="#__codelineno-20-7"></a><span class="x">- Purge homepage lors de nouvelle publication/modification/suppression</span>
</span><span id="__span-20-8"><a id="__codelineno-20-8" name="__codelineno-20-8" href="#__codelineno-20-8"></a><span class="x">- Purge archives lors de nouvelles publications</span>
</span><span id="__span-20-9"><a id="__codelineno-20-9" name="__codelineno-20-9" href="#__codelineno-20-9"></a><span class="x">- Purge page modifiée</span>
</span><span id="__span-20-10"><a id="__codelineno-20-10" name="__codelineno-20-10" href="#__codelineno-20-10"></a><span class="x">- Purge page lors de nouveaux commentaires/commentaires supprimés</span>
</span></code></pre></div></p>
<p><strong>Comment ça fonctionne</strong> :</p>
<ol>
<li>Lorsqu'une page/article WordPress est publié/modifié, le plugin déclenche des hooks WordPress (<code>save_post</code>, <code>publish_post</code>, etc.)</li>
<li>Le plugin envoie une requête HTTP à Nginx pour invalider les entrées de cache concernées</li>
<li>Le cache Nginx supprime les entrées, forçant la régénération au prochain accès</li>
</ol>
<p><strong>Hooks WordPress utilisés</strong> :
- <code>save_post</code> → Purge la page/article modifié
- <code>publish_post</code> → Purge homepage + archives
- <code>wp_trash_post</code> → Purge homepage + archives
- <code>comment_post</code> → Purge la page commentée
- <code>delete_comment</code> → Purge la page commentée</p>
<p><strong>Avantage</strong> : Les visiteurs voient toujours le contenu à jour sans intervention manuelle.</p>
<hr />
<h2 id="historique-des-modifications">Historique des modifications<a class="headerlink" href="#historique-des-modifications" title="Permanent link">&para;</a></h2>
<table>
<thead>
<tr>
<th>Date</th>
<th>Action</th>
<th>Par</th>
</tr>
</thead>
<tbody>
<tr>
<td>2025-10-18</td>
<td>Configuration initiale cache proxy WordPress</td>
<td>Claude Code</td>
</tr>
<tr>
<td>2025-10-18</td>
<td>Ajout zones de cache globales</td>
<td>Claude Code</td>
</tr>
<tr>
<td>2025-10-18</td>
<td>Activation cache clemence + solidarlink</td>
<td>Claude Code</td>
</tr>
<tr>
<td>2025-10-18</td>
<td>Documentation complète créée</td>
<td>Claude Code</td>
</tr>
<tr>
<td>2025-10-20</td>
<td>Installation Nginx Helper sur Clemence</td>
<td>Claude Code</td>
</tr>
<tr>
<td>2025-10-20</td>
<td>Configuration purge automatique via hooks</td>
<td>Claude Code</td>
</tr>
<tr>
<td>2025-10-20</td>
<td>Vérification cache fonctionnel (HIT confirmé)</td>
<td>Claude Code</td>
</tr>
</tbody>
</table>
<hr />
<h2 id="todo">TODO<a class="headerlink" href="#todo" title="Permanent link">&para;</a></h2>
<ul class="task-list">
<li class="task-list-item"><label class="task-list-control"><input type="checkbox" disabled checked/><span class="task-list-indicator"></span></label> Tester cache depuis Windows avec credentials basic auth</li>
<li class="task-list-item"><label class="task-list-control"><input type="checkbox" disabled checked/><span class="task-list-indicator"></span></label> Nginx Helper installé et configuré pour purge automatique</li>
<li class="task-list-item"><label class="task-list-control"><input type="checkbox" disabled/><span class="task-list-indicator"></span></label> Monitorer taux HIT/MISS pendant 1 semaine</li>
<li class="task-list-item"><label class="task-list-control"><input type="checkbox" disabled/><span class="task-list-indicator"></span></label> Documenter procédure purge cache dans scripts maintenance</li>
<li class="task-list-item"><label class="task-list-control"><input type="checkbox" disabled/><span class="task-list-indicator"></span></label> Ajouter métriques cache au dashboard auto-start (futur)</li>
</ul>
<hr />
<p><strong>Version</strong> : 1.1
<strong>Auteur</strong> : Claude Code + Julien
<strong>Prochaine revue</strong> : Après 1 semaine de production</p>












                
              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
          <button type="button" class="md-top md-icon" data-md-component="top" hidden>
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8z"/></svg>
  Retour en haut de la page
</button>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
    <div class="md-copyright__highlight">
      Copyright &copy; 2025 Julien Fernandez
    </div>
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    
      
      <script id="__config" type="application/json">{"base": "../../..", "features": ["navigation.instant", "navigation.tracking", "navigation.tabs", "navigation.tabs.sticky", "navigation.sections", "navigation.indexes", "navigation.top", "search.suggest", "search.highlight", "content.code.copy"], "search": "../../../assets/javascripts/workers/search.973d3a69.min.js", "tags": null, "translations": {"clipboard.copied": "Copi\u00e9 dans le presse-papier", "clipboard.copy": "Copier dans le presse-papier", "search.result.more.one": "1 de plus sur cette page", "search.result.more.other": "# de plus sur cette page", "search.result.none": "Aucun document trouv\u00e9", "search.result.one": "1 document trouv\u00e9", "search.result.other": "# documents trouv\u00e9s", "search.result.placeholder": "Taper pour d\u00e9marrer la recherche", "search.result.term.missing": "Non trouv\u00e9", "select.version": "S\u00e9lectionner la version"}, "version": null}</script>
    
    
      <script src="../../../assets/javascripts/bundle.f55a23d4.min.js"></script>
      
    
  </body>
</html>